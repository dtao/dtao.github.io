function getLanguageFromClass(e){switch(e){case"csharp":return"cs";case"javascript":return"javascript";case"ruby":return"ruby";default:return"javascript"}}function highlight(e){var t=getLanguageFromClass(e.className),n=e.textContent,r=hljs.highlight(t,n).value;e.innerHTML=r}function highlightAll(){for(var e=document.querySelectorAll("pre > code"),t=0;t<e.length;++t)highlight(e[t])}function pluralizeCount(e,t){return 1===e?e+" "+t:e+" "+t+"s"}function addClass(e,t){if(e.classList)e.classList.add(t);else{var n=e.className.split(/\s+/);n.push(t),e.className=n.join(" ")}}function removeClass(e,t){if(e.classList)e.classList.remove(t);else{var n=e.className.split(/\s+/);removeFromArray(n,t),e.className=n.join(" ")}}function removeFromArray(e,t){for(var n=e.length-1;n>=0;--n)e[n]===t&&e.splice(n,1)}function displayVoteCounts(e){document.getElementById("upvote-count").textContent=pluralizeCount(e.upvotes,"upvote"),document.getElementById("downvote-count").textContent=pluralizeCount(e.downvotes,"downvote")}function handleUpDownResponse(e){return"duplicate"===e.status?(alert("You voted for this idea already."),!1):(displayVoteCounts(e),!0)}function getCurrentUrl(){return window.location.hostname+window.location.pathname}function initVotingButtons(){UpDown.getCounts(displayVoteCounts);var e=document.getElementById("vote-up"),t=document.getElementById("vote-down");switch(e.addEventListener("click",function(){UpDown.voteUp(function(n){handleUpDownResponse(n)&&(addClass(e,"voted"),removeClass(t,"voted"),localStorage[getCurrentUrl()]="up")})}),t.addEventListener("click",function(){UpDown.voteDown(function(n){handleUpDownResponse(n)&&(addClass(t,"voted"),removeClass(e,"voted"),localStorage[getCurrentUrl()]="down")})}),localStorage[getCurrentUrl()]){case"up":addClass(e,"voted");break;case"down":addClass(t,"voted")}}var disqus_shortname="danieltao",disqus_identifier=window.location.pathname.match(/ideas\/(?:[^\/]*)$/)[0];window.addEventListener("load",function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}),function(e,t,n,r,a,o,i){e.GoogleAnalyticsObject=a,e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date,o=t.createElement(n),i=t.getElementsByTagName(n)[0],o.async=1,o.src=r,i.parentNode.insertBefore(o,i)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-42171040-1","danieltao.com"),ga("send","pageview");var hljs=new function(){function e(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function t(e){for(var t=e.firstChild;t;t=t.nextSibling){if("CODE"==t.nodeName)return t;if(3!=t.nodeType||!t.nodeValue.match(/\s+/))break}}function n(e,t){return Array.prototype.map.call(e.childNodes,function(e){return 3==e.nodeType?t?e.nodeValue.replace(/\n/g,""):e.nodeValue:"BR"==e.nodeName?"\n":n(e,t)}).join("")}function r(e){var t=(e.className+" "+e.parentNode.className).split(/\s+/);t=t.map(function(e){return e.replace(/^language-/,"")});for(var n=0;n<t.length;n++)if(h[t[n]]||"no-highlight"==t[n])return t[n]}function a(e){var t=[];return function n(e,r){for(var a=e.firstChild;a;a=a.nextSibling)3==a.nodeType?r+=a.nodeValue.length:"BR"==a.nodeName?r+=1:1==a.nodeType&&(t.push({event:"start",offset:r,node:a}),r=n(a,r),t.push({event:"stop",offset:r,node:a}));return r}(e,0),t}function o(t,n,r){function a(){return t.length&&n.length?t[0].offset!=n[0].offset?t[0].offset<n[0].offset?t:n:"start"==n[0].event?t:n:t.length?t:n}function o(t){function n(t){return" "+t.nodeName+'="'+e(t.value)+'"'}return"<"+t.nodeName+Array.prototype.map.call(t.attributes,n).join("")+">"}for(var i=0,c="",s=[];t.length||n.length;){var l=a().splice(0,1)[0];if(c+=e(r.substr(i,l.offset-i)),i=l.offset,"start"==l.event)c+=o(l.node),s.push(l.node);else if("stop"==l.event){var u,d=s.length;do d--,u=s[d],c+="</"+u.nodeName.toLowerCase()+">";while(u!=l.node);for(s.splice(d,1);d<s.length;)c+=o(s[d]),d++}}return c+e(r.substr(i))}function i(e){function t(t,n){return RegExp(t,"m"+(e.cI?"i":"")+(n?"g":""))}function n(e,r){function a(e,t){t.split(" ").forEach(function(t){var n=t.split("|");i[n[0]]=[e,n[1]?Number(n[1]):1],o.push(n[0])})}if(!e.compiled){e.compiled=!0;var o=[];if(e.k){var i={};if(e.lR=t(e.l||hljs.IR,!0),"string"==typeof e.k)a("keyword",e.k);else for(var c in e.k)e.k.hasOwnProperty(c)&&a(c,e.k[c]);e.k=i}r&&(e.bWK&&(e.b="\\b("+o.join("|")+")\\s"),e.bR=t(e.b?e.b:"\\B|\\b"),e.e||e.eW||(e.e="\\B|\\b"),e.e&&(e.eR=t(e.e)),e.tE=e.e||"",e.eW&&r.tE&&(e.tE+=(e.e?"|":"")+r.tE)),e.i&&(e.iR=t(e.i)),void 0===e.r&&(e.r=1),e.c||(e.c=[]);for(var s=0;s<e.c.length;s++)"self"==e.c[s]&&(e.c[s]=e),n(e.c[s],e);e.starts&&n(e.starts,r);for(var l=[],s=0;s<e.c.length;s++)l.push(e.c[s].b);e.tE&&l.push(e.tE),e.i&&l.push(e.i),e.t=l.length?t(l.join("|"),!0):{exec:function(){return null}}}}n(e)}function c(t,n){function r(e,t){for(var n=0;n<t.c.length;n++){var r=t.c[n].bR.exec(e);if(r&&0==r.index)return t.c[n]}}function a(e,t){return e.e&&e.eR.test(t)?e:e.eW?a(e.parent,t):void 0}function o(e,t){return t.i&&t.iR.test(e)}function l(e,t){var n=p.cI?t[0].toLowerCase():t[0];return e.k.hasOwnProperty(n)&&e.k[n]}function u(){var t=e(v);if(!m.k)return t;var n="",r=0;m.lR.lastIndex=0;for(var a=m.lR.exec(t);a;){n+=t.substr(r,a.index-r);var o=l(m,a);o?(w+=o[1],n+='<span class="'+o[0]+'">'+a[0]+"</span>"):n+=a[0],r=m.lR.lastIndex,a=m.lR.exec(t)}return n+t.substr(r)}function d(){if(m.sL&&!h[m.sL])return e(v);var t=m.sL?c(m.sL,v):s(v);return m.r>0&&(w+=t.keyword_count,N+=t.r),'<span class="'+t.language+'">'+t.value+"</span>"}function f(){return void 0!==m.sL?d():u()}function g(t,n){var r=t.cN?'<span class="'+t.cN+'">':"";t.rB?(y+=r,v=""):t.eB?(y+=e(n)+r,v=""):(y+=r,v=n),m=Object.create(t,{parent:{value:m}}),N+=t.r}function b(t,n){if(v+=t,void 0===n)return y+=f(),0;var i=r(n,m);if(i)return y+=f(),g(i,n),i.rB?0:n.length;var c=a(m,n);if(c){c.rE||c.eE||(v+=n),y+=f();do m.cN&&(y+="</span>"),m=m.parent;while(m!=c.parent);return c.eE&&(y+=e(n)),v="",c.starts&&g(c.starts,""),c.rE?0:n.length}if(o(n,m))throw"Illegal";return v+=n,n.length||1}var p=h[t];i(p);var m=p,v="",N=0,w=0,y="";try{for(var k,C,E=0;;){if(m.t.lastIndex=E,k=m.t.exec(n),!k)break;C=b(n.substr(E,k.index-E),k[0]),E=k.index+C}return b(n.substr(E)),{r:N,keyword_count:w,value:y,language:t}}catch(R){if("Illegal"==R)return{r:0,keyword_count:0,value:e(n)};throw R}}function s(t){var n={keyword_count:0,r:0,value:e(t)},r=n;for(var a in h)if(h.hasOwnProperty(a)){var o=c(a,t);o.language=a,o.keyword_count+o.r>r.keyword_count+r.r&&(r=o),o.keyword_count+o.r>n.keyword_count+n.r&&(r=n,n=o)}return r.language&&(n.second_best=r),n}function l(e,t,n){return t&&(e=e.replace(/^((<[^>]+>|\t)+)/gm,function(e,n){return n.replace(/\t/g,t)})),n&&(e=e.replace(/\n/g,"<br>")),e}function u(e,t,i){var u=n(e,i),d=r(e);if("no-highlight"!=d){var f=d?c(d,u):s(u);d=f.language;var h=a(e);if(h.length){var g=document.createElement("pre");g.innerHTML=f.value,f.value=o(h,a(g),u)}f.value=l(f.value,t,i);var b=e.className;b.match("(\\s|^)(language-)?"+d+"(\\s|$)")||(b=b?b+" "+d:d),e.innerHTML=f.value,e.className=b,e.result={language:d,kw:f.keyword_count,re:f.r},f.second_best&&(e.second_best={language:f.second_best.language,kw:f.second_best.keyword_count,re:f.second_best.r})}}function d(){d.called||(d.called=!0,Array.prototype.map.call(document.getElementsByTagName("pre"),t).filter(Boolean).forEach(function(e){u(e,hljs.tabReplace)}))}function f(){window.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("load",d,!1)}var h={};this.LANGUAGES=h,this.highlight=c,this.highlightAuto=s,this.fixMarkup=l,this.highlightBlock=u,this.initHighlighting=d,this.initHighlightingOnLoad=f,this.IR="[a-zA-Z][a-zA-Z0-9_]*",this.UIR="[a-zA-Z_][a-zA-Z0-9_]*",this.NR="\\b\\d+(\\.\\d+)?",this.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",this.BNR="\\b(0b[01]+)",this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",this.BE={b:"\\\\[\\s\\S]",r:0},this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0},this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0},this.CLCM={cN:"comment",b:"//",e:"$"},this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"},this.HCM={cN:"comment",b:"#",e:"$"},this.NM={cN:"number",b:this.NR,r:0},this.CNM={cN:"number",b:this.CNR,r:0},this.BNM={cN:"number",b:this.BNR,r:0},this.inherit=function(e,t){var n={};for(var r in e)n[r]=e[r];if(t)for(var r in t)n[r]=t[r];return n}};hljs.LANGUAGES.cs=function(e){return{k:"abstract as base bool break byte case catch char checked class const continue decimal default delegate do double else enum event explicit extern false finally fixed float for foreach goto if implicit in int interface internal is lock long namespace new null object operator out override params private protected public readonly ref return sbyte sealed short sizeof stackalloc static string struct switch this throw true try typeof uint ulong unchecked unsafe ushort using virtual volatile void while ascending descending from get group into join let orderby partial select set value var where yield",c:[{cN:"comment",b:"///",e:"$",rB:!0,c:[{cN:"xmlDocTag",b:"///|<!--|-->"},{cN:"xmlDocTag",b:"</?",e:">"}]},e.CLCM,e.CBLCLM,{cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line region endregion pragma checksum"},{cN:"string",b:'@"',e:'"',c:[{b:'""'}]},e.ASM,e.QSM,e.CNM]}}(hljs),hljs.LANGUAGES.ruby=function(e){var t="[a-zA-Z_][a-zA-Z0-9_]*(\\!|\\?)?",n="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",r={keyword:"and false then defined module in return redo if BEGIN retry end for true self when next until do begin unless END rescue nil else break undef not super class case require yield alias while ensure elsif or include"},a={cN:"yardoctag",b:"@[A-Za-z]+"},o=[{cN:"comment",b:"#",e:"$",c:[a]},{cN:"comment",b:"^\\=begin",e:"^\\=end",c:[a],r:10},{cN:"comment",b:"^__END__",e:"\\n$"}],i={cN:"subst",b:"#\\{",e:"}",l:t,k:r},c=[e.BE,i],s=[{cN:"string",b:"'",e:"'",c:c,r:0},{cN:"string",b:'"',e:'"',c:c,r:0},{cN:"string",b:"%[qw]?\\(",e:"\\)",c:c},{cN:"string",b:"%[qw]?\\[",e:"\\]",c:c},{cN:"string",b:"%[qw]?{",e:"}",c:c},{cN:"string",b:"%[qw]?<",e:">",c:c,r:10},{cN:"string",b:"%[qw]?/",e:"/",c:c,r:10},{cN:"string",b:"%[qw]?%",e:"%",c:c,r:10},{cN:"string",b:"%[qw]?-",e:"-",c:c,r:10},{cN:"string",b:"%[qw]?\\|",e:"\\|",c:c,r:10}],l={cN:"function",bWK:!0,e:" |$|;",k:"def",c:[{cN:"title",b:n,l:t,k:r},{cN:"params",b:"\\(",e:"\\)",l:t,k:r}].concat(o)},u=o.concat(s.concat([{cN:"class",bWK:!0,e:"$|;",k:"class module",c:[{cN:"title",b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?",r:0},{cN:"inheritance",b:"<\\s*",c:[{cN:"parent",b:"("+e.IR+"::)?"+e.IR}]}].concat(o)},l,{cN:"constant",b:"(::)?(\\b[A-Z]\\w*(::)?)+",r:0},{cN:"symbol",b:":",c:s.concat([{b:n}]),r:0},{cN:"symbol",b:t+":",r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{cN:"number",b:"\\?\\w"},{cN:"variable",b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{b:"("+e.RSR+")\\s*",c:o.concat([{cN:"regexp",b:"/",e:"/[a-z]*",i:"\\n",c:[e.BE,i]}]),r:0}]));return i.c=u,l.c[1].c=u,{l:t,k:r,c:u}}(hljs),hljs.LANGUAGES.javascript=function(e){return{k:{keyword:"in if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const",literal:"true false null undefined NaN Infinity"},c:[e.ASM,e.QSM,e.CLCM,e.CBLCLM,e.CNM,{b:"("+e.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[e.CLCM,e.CBLCLM,{cN:"regexp",b:"/",e:"/[gim]*",i:"\\n",c:[{b:"\\\\/"}]},{b:"<",e:">;",sL:"xml"}],r:0},{cN:"function",bWK:!0,e:"{",k:"function",c:[{cN:"title",b:"[A-Za-z$_][0-9A-Za-z$_]*"},{cN:"params",b:"\\(",e:"\\)",c:[e.CLCM,e.CBLCLM],i:"[\"'\\(]"}],i:"\\[|%"}]}}(hljs),function(e,t){function n(e){return e.charAt(Math.floor(Math.random()*e.length))}function r(e){for(var t="";t.length<e;)t+=n(s);return t}function a(){for(var t=r(10);t in e;)t=r(10);return t}function o(t){var n=a();return e[n]=function(){try{t.apply(this,arguments)}finally{delete e[n]}},n}function i(){return e.location.hostname+e.location.pathname}function c(e,n){var r=t.createElement("script");r.src=l+e+"?uri="+encodeURIComponent(i())+"&callback="+o(n),t.head.appendChild(r)}var s="abcdefghijklmnopqrstuvwxyz",l="http://up-down.herokuapp.com/";e.UpDown={getCounts:function(e){c("counts",e)},voteUp:function(e){c("up",e)},voteDown:function(e){c("down",e)}}}(window,document),window.addEventListener("load",function(){highlightAll(),initVotingButtons()});