function pluralizeCount(e,t){return 1===e?e+" "+t:e+" "+t+"s"}function addClass(e,t){if(e.classList)e.classList.add(t);else{var n=e.className.split(/\s+/);n.push(t),e.className=n.join(" ")}}function removeClass(e,t){if(e.classList)e.classList.remove(t);else{var n=e.className.split(/\s+/);removeFromArray(n,t),e.className=n.join(" ")}}function removeFromArray(e,t){for(var n=e.length-1;n>=0;--n)e[n]===t&&e.splice(n,1)}function displayVoteCounts(e){document.getElementById("upvote-count").textContent=pluralizeCount(e.upvotes,"upvote"),document.getElementById("downvote-count").textContent=pluralizeCount(e.downvotes,"downvote")}function handleUpDownResponse(e){return"duplicate"===e.status?(alert("You voted for this idea already."),!1):(displayVoteCounts(e),!0)}function getCurrentUrl(){return window.location.hostname+window.location.pathname}function initVotingButtons(){UpDown.getCounts(displayVoteCounts);var e=document.getElementById("vote-up"),t=document.getElementById("vote-down");switch(e.addEventListener("click",function(){UpDown.voteUp(function(n){handleUpDownResponse(n)&&(addClass(e,"voted"),removeClass(t,"voted"),localStorage[getCurrentUrl()]="up")})}),t.addEventListener("click",function(){UpDown.voteDown(function(n){handleUpDownResponse(n)&&(addClass(t,"voted"),removeClass(e,"voted"),localStorage[getCurrentUrl()]="down")})}),localStorage[getCurrentUrl()]){case"up":addClass(e,"voted");break;case"down":addClass(t,"voted")}}var disqus_shortname="danieltao",disqus_identifier=window.location.pathname.match(/ideas\/(?:[^\/]*)$/)[0];window.addEventListener("load",function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}),function(e,t,n,o,a,r,s){e.GoogleAnalyticsObject=a,e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date,r=t.createElement(n),s=t.getElementsByTagName(n)[0],r.async=1,r.src=o,s.parentNode.insertBefore(r,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-42171040-1","danieltao.com"),ga("send","pageview"),function(e,t){function n(e){return e.charAt(Math.floor(Math.random()*e.length))}function o(e){for(var t="";t.length<e;)t+=n(d);return t}function a(){for(var t=o(10);t in e;)t=o(10);return t}function r(t){var n=a();return e[n]=function(){try{t.apply(this,arguments)}finally{delete e[n]}},n}function s(){return e.location.hostname+e.location.pathname}function i(e,n){var o=t.createElement("script");o.src=c+e+"?uri="+encodeURIComponent(s())+"&callback="+r(n),t.head.appendChild(o)}var d="abcdefghijklmnopqrstuvwxyz",c="http://up-down.herokuapp.com/";e.UpDown={getCounts:function(e){i("counts",e)},voteUp:function(e){i("up",e)},voteDown:function(e){i("down",e)}}}(window,document),window.addEventListener("load",function(){initVotingButtons()});